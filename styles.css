:root{
  --accent-green:#A7F3D0;
  --accent-yellow:#D97706;
  --accent-cyan:#06B6D4;

  --bg:#0b0f12; --bg-2:#12171b; --bg-3:#161c21;
  --text:#eef2f6; --muted:#9aa6b2; --card:#0f1418; --border:#202831;
  --shadow:0 6px 18px rgba(0,0,0,.35);

  --bg-l:#f7fafc; --bg-2-l:#ffffff; --bg-3-l:#f1f5f9;
  --text-l:#0b1220; --muted-l:#475569; --card-l:#ffffff; --border-l:#d9e1e8;
  --shadow-l:0 6px 18px rgba(0,0,0,.08);

  --radius:14px; --radius-sm:10px; --radius-xs:8px;
  --safe-top:env(safe-area-inset-top,0px);
  --safe-bottom:env(safe-area-inset-bottom,0px);
  --safe-left:env(safe-area-inset-left,0px);
  --safe-right:env(safe-area-inset-right,0px);
  --max-w:390px;
  --transition:140ms ease;
}

[data-theme="light"]{
  --bg:var(--bg-l); --bg-2:var(--bg-2-l); --bg-3:var(--bg-3-l);
  --text:var(--text-l); --muted:var(--muted-l); --card:var(--card-l);
  --border:var(--border-l); --shadow:var(--shadow-l);
}

html,body{height:100%;background:var(--bg);color:var(--text);font-family:"Outfit",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";}
body{margin:0;padding:0;display:flex;justify-content:center;}

.app{width:100%;max-width:var(--max-w);min-height:100dvh;
  padding-left:max(12px,var(--safe-left));padding-right:max(12px,var(--safe-right));
  padding-bottom:calc(10px + var(--safe-bottom));box-sizing:border-box;}

.header{
  position:sticky; top:0; z-index:100;
  background:linear-gradient(180deg,var(--bg) 60%, rgba(0,0,0,0) 100%);
  padding-top:calc(10px + var(--safe-top)); padding-bottom:8px;
  backdrop-filter:saturate(1.1) blur(6px);
}
.title-row{display:flex;align-items:center;gap:10px;justify-content:space-between;padding:4px 2px 8px 2px;}
h1{font-size:22px;line-height:1.2;letter-spacing:.2px;margin:0;font-weight:800;}
.chips{display:flex;gap:6px;flex-wrap:wrap;}
.chip{font-size:12px;padding:6px 10px;border:1px solid var(--border);background:var(--bg-2);color:var(--muted);border-radius:999px;user-select:none;}

.week-actions{display:flex;gap:8px;overflow:auto;padding:6px 2px 8px 2px;}
.btn{border:1px solid var(--border);background:var(--bg-2);color:var(--text);padding:10px 12px;border-radius:var(--radius-xs);font-weight:700;font-size:14px;cursor:pointer;transition:transform var(--transition), background var(--transition), border var(--transition), opacity var(--transition);}
.btn:hover{transform:translateY(-1px);}
.btn:active{transform:translateY(0) scale(.98);}
.btn.primary{background:var(--bg-3);}

.filters{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:6px 0 10px 0;align-items:center;}
.filters .row{grid-column:1 / -1;display:flex;gap:8px;}
.input,.select{width:100%;border:1px solid var(--border);background:var(--bg-2);color:var(--text);border-radius:var(--radius-xs);padding:10px 11px;font-size:14px;outline:none;transition:border var(--transition), background var(--transition);}
.input::placeholder{color:var(--muted);}
.check{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--muted);}
.link-like{font-size:13px;color:var(--muted);text-decoration:underline;cursor:pointer;}

.tabs{display:flex;align-items:center;gap:8px;padding:10px 0 6px 0;}
.chev{border:1px solid var(--border);background:var(--bg-2);width:38px;height:38px;border-radius:12px;display:grid;place-items:center;cursor:pointer;user-select:none;font-size:18px;transition:transform var(--transition);}
.chev:active{transform:scale(.96);}
.tablist{display:flex;gap:6px;overflow:auto;flex:1;scrollbar-width:none;}
.tablist::-webkit-scrollbar{display:none;}
.tab{min-width:48px;padding:8px 12px;border:1px solid var(--border);background:var(--bg-2);border-radius:999px;font-weight:700;color:var(--muted);text-align:center;cursor:pointer;user-select:none;transition:all var(--transition);}
.tab[aria-selected="true"]{color:var(--text);background:var(--bg-3);box-shadow:inset 0 0 0 2px var(--border);}

.dayhead{display:flex;align-items:baseline;justify-content:space-between;padding:8px 2px 8px 2px;}
.daytitle{font-size:18px;font-weight:800;letter-spacing:.3px;margin:0;}
.daymeta{font-size:13px;color:var(--muted);}

.card{border:1px solid var(--border);background:var(--card);border-radius:var(--radius);padding:12px;margin-bottom:10px;box-shadow:var(--shadow);transition:transform var(--transition), border var(--transition), background var(--transition), box-shadow var(--transition);}
.card:hover{transform:translateY(-1px);}
.task-row{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;}
.task-left{display:flex;align-items:center;gap:10px;}
.pill{font-size:12px;font-weight:700;padding:6px 10px;border-radius:999px;border:1px solid var(--border);background:var(--bg-2);color:var(--text);user-select:none;}
.title{font-weight:700;font-size:15px;line-height:1.25;}
.meta{font-size:12px;color:var(--muted);margin-top:4px;display:flex;gap:10px;flex-wrap:wrap;}
.actions{display:flex;gap:8px;}
.icon-btn{width:36px;height:36px;display:grid;place-items:center;border:1px solid var(--border);background:var(--bg-2);border-radius:12px;cursor:pointer;transition:transform var(--transition), background var(--transition);font-size:16px;}
.icon-btn:hover{transform:translateY(-1px);}
.icon-btn:active{transform:translateY(0) scale(.96);}
.done .title{text-decoration:line-through;color:var(--muted);}

.view-toggle{display:flex;gap:8px;justify-content:flex-end;padding:6px 2px 8px 2px;}
.week-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;user-select:none;}
.col{border:1px dashed var(--border);background:var(--bg-2);border-radius:var(--radius);padding:8px;min-height:120px;display:flex;flex-direction:column;gap:8px;}
.col h4{margin:2px 2px 6px 2px;font-size:12px;color:var(--muted);font-weight:700;}
.dragging{opacity:.6;}
.drop-target{outline:2px solid var(--accent-cyan);}

.stats{margin-top:14px;padding:10px;border:1px solid var(--border);background:var(--bg-2);border-radius:var(--radius);}
.stat-row{display:flex;align-items:center;gap:8px;margin:6px 0;}
.bar{flex:1;height:8px;border-radius:999px;background:var(--bg-3);overflow:hidden;border:1px solid var(--border);}
.bar>span{display:block;height:100%;width:0%;transition:width 240ms ease;}

.modal{
  position:fixed; inset:0; display:none; place-items:center;
  background:rgba(0,0,0,.55); z-index:9999;
  padding:max(16px,var(--safe-top)) max(16px,var(--safe-right)) max(16px,var(--safe-bottom)) max(16px,var(--safe-left));
}
.modal.open{display:grid;}
.sheet{
  position:relative; width:100%; max-width:var(--max-w);
  max-height:calc(100dvh - 48px - var(--safe-top) - var(--safe-bottom));
  overflow:auto; background:var(--card); border:1px solid var(--border); border-radius:18px;
  box-shadow:var(--shadow); padding:16px; z-index:10000; -webkit-overflow-scrolling:touch;
}
.sheet h3{margin:4px 0 12px 0;}

.sr-only{position:absolute;width:1px;height:1px;clip:rect(0,0,0,0);overflow:hidden;white-space:nowrap;}
